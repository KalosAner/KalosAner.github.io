截止2010年之前Linux下的glibc中的malloc来自Doug Lea。

class的构造函数无法被直接调用，只能使用new express在分配内存的同时调用，例如new string。

new express：申请内存并调用构造函数，底层会通过调用`malloc`实现。

operator new：申请内存，大小可以自己设置。

在所有平台上的array new中，`malloc`函数被调用时会创建一个cookie用来保存申请内存的块数，用来在释放内存的时候可以直接调用`delete[] string`进行array delete，`delete[] string`在析构时一般会反向析构。

上面提到不能直接调用构造函数，但是可以使用定点new来调用构造函数，如下。

```cpp
A* buf = new A[size];
A* tmp = buf;
for (int i = 0; i < size; ++ i) {
	new(tmp++) A(i);
}
delete[] buf;
```
